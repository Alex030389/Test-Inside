'use strict';

svg4everybody(); // ///////////////////////////////////// polifill inicialize
// objectFitImages();
// ///////////////////////////////////// plagin inicialize
// lazyLoad
// const lazyLoadInstance = new LazyLoad({
// 	elements_selector: ".lazy"
// });
// selectric

$('[data-lib="selectric"]').selectric(); // ///////////////////////////////////// block

var button = document.querySelectorAll('button');

if (button) {
  for (var i = 0; i < button.length; i++) {
    button[i].addEventListener('mouseup', function () {
      this.blur();
    });
  }
}

;
$('[data-m-btn="open"]').on('click', function () {
  openMNav();
});
$('[data-m-btn="close"]').on('click', function () {
  closeMNav();
});
$(window).on('resize', function () {
  if ($('[data-el="header__sign-in"]').is(':visible')) {
    $('[data-el="header__nav"]').show();
    $('body').css({
      "overflow-y": "auto"
    });
  } else {
    $('[data-el="header__nav"]').attr('style', '');
  }
});

function openMNav() {
  $('[data-el="header__nav"]').fadeIn(150);
  $('body').css({
    "overflow-y": "hidden"
  });
}

function closeMNav() {
  $('[data-el="header__nav"]').fadeOut(150);
  $('body').css({
    "overflow-y": "auto"
  });
}

;
$('[data-m-btn="search"]').on('click', function () {
  $('[data-el="m-search-wrap"]').slideToggle(150);
  $('.header__search-control').trigger('focus');
});
$(window).on('resize', function () {
  if ($('[data-m-btn="search"]').is(':hidden')) {
    $('[data-el="m-search-wrap"]').hide();
  }
});
;
tdTabs('[data-tab-btn]', '[data-tab-content]');

function tdTabs(btn, content) {
  var tabBtns = $(btn);
  var tabContens = $(content);
  tabBtns.first().addClass('_active');
  tabContens.hide();
  tabContens.first().fadeIn();
  tabBtns.on('click', function () {
    tabBtns.removeClass('_active');
    $(this).addClass('_active');
    tabContens.hide();
    tabContens.eq($(this).attr('data-tab-btn')).fadeIn();
  });
}

; //////////////////////////////////////////// data-slider="1"

$('[data-slider="1"]').slick({
  slidesToShow: 1,
  slidesToScroll: 1,
  arrows: false,
  dots: true,
  infinite: true,
  accessibility: false,
  touchThreshold: 10,
  swipeToSlide: true,
  adaptiveHeight: true
});
;
var copyCodeButton = document.querySelector('[data-btn="copy"]');

if (copyCodeButton) {
  var onCopyCodeButtonClick = function onCopyCodeButtonClick(evt) {
    evt.preventDefault(); // evt.target.classList.add('button--copy--success');

    evt.target.textContent = 'Copied';
    var range = document.createRange();
    range.selectNode(document.querySelector('[data-value="code"]'));
    window.getSelection().removeAllRanges();
    window.getSelection().addRange(range);
    document.execCommand('copy');
    window.getSelection().removeAllRanges();
  };

  copyCodeButton.addEventListener('click', onCopyCodeButtonClick);
}

;
;
$('.mod-need-help__list').on('click', '.mod-need-help__btn', function () {
  $(this).next().slideToggle();
});
;
$('[data-btn="modal"]').magnificPopup({
  type: 'inline',
  showCloseBtn: false,
  callbacks: {
    open: function open() {
      $('.modal__btn-close').on('click', function () {
        $.magnificPopup.close();
      });
    }
  }
}); // //////////////////////////// download img when modal open

$('[data-btn="modal-2"]').magnificPopup({
  type: 'inline',
  showCloseBtn: false,
  callbacks: {
    open: function open() {
      $('.class-element').each(function (ind, elem) {
        $(elem).attr('src', $(elem).data('src'));
      });
      $('.modal__btn-close').on('click', function () {
        $.magnificPopup.close();
      });
    }
  }
});
;
$('a[href^="#"], *[data-href^="#"]').on('click', function (e) {
  e.preventDefault();
  var t = 300;
  var d = $(this).attr('data-href') ? $(this).attr('data-href') : $(this).attr('href');
  $('html,body').stop().animate({
    scrollTop: $(d).offset().top
  }, t);
});
;
$(window).on('scroll', function () {
  if ($(this).scrollTop() > 1500) {
    // $('.up').fadeIn();
    $('.up').css({
      "transform": "translateX(0)"
    });
  } else {
    $('.up').css({
      "transform": "translateX(100px)"
    });
  }
});
$('.up').on('click', function () {
  $('body,html').animate({
    scrollTop: 0
  }, 500);
});
; // ///////////////////////////////////////////////////// stick footer

(function () {
  var isIE11 = !!window.MSInputMethodContext && !!document.documentMode;

  var stickFooter = function stickFooter() {
    var FOOTER = document.querySelector('footer');
    var MAIN = document.querySelector('main');
    var BODY = document.querySelector('body');
    var footerHeight = FOOTER.offsetHeight;
    BODY.style.position = 'relative';
    MAIN.style.marginBottom = footerHeight + 'px';
    FOOTER.style.position = 'absolute';
    FOOTER.style.bottom = '0';
    FOOTER.style.left = '0';
    FOOTER.style.width = '100%';
  };

  if (isIE11) {
    stickFooter();
    window.addEventListener('resize', stickFooter);
  }

  ;
})();